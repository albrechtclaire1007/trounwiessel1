<!DOCTYPE html>
<html lang="lb">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <title>Trounwiessel Wierder - Setz d'Buschtawen an d√©i richteg Reiefolleg</title>

  <!-- Font preload + face -->
  <link rel="preload"
        href="https://raw.githubusercontent.com/albrechtclaire1007/schoulschreft/main/schoulschreft_bold%5B2%5D.TTF"
        as="font" type="font/ttf" crossorigin>
  <style>
    @font-face{
      font-family:'Schoulschreft';
      src: url('https://raw.githubusercontent.com/albrechtclaire1007/schoulschreft/main/schoulschreft_bold%5B2%5D.TTF') format('truetype');
      font-weight:400; font-style:normal; font-display:swap;
    }
    @font-face{
      font-family:'Schoulschreft';
      src: url('https://raw.githubusercontent.com/albrechtclaire1007/schoulschreft/main/schoulschreft_bold%5B2%5D.TTF') format('truetype');
      font-weight:700; font-style:normal; font-display:swap;
    }

    :root{ --blue:#1c2d4f; --gold:#f2ac3b; }
    body{margin:0;padding:0;font-family:'Schoulschreft', -apple-system, system-ui, Arial, sans-serif;background:#fff;min-height:100vh}
    .header{background:#1c2d4f;color:#fff;text-align:center;padding:20px;font-size:28px;font-weight:bold;margin-bottom:30px}
    .container{max-width:1200px;margin:0 auto;padding:20px}
    .word-container{max-width:500px;margin:0 auto;background:#fff;border:3px solid var(--gold);border-radius:15px;padding:40px;text-align:center;box-shadow:0 4px 8px rgba(0,0,0,.1)}
    .progress-bar{background:#f0f0f0;height:8px;border-radius:4px;margin-bottom:30px;overflow:hidden}
    .progress-fill{background:linear-gradient(90deg,#1c2d4f,#f2ac3b);height:100%;transition:width .5s ease;border-radius:4px}
    .word-counter{font-size:18px;color:#1c2d4f;margin-bottom:20px;font-weight:bold}
    .image-container{position:relative;margin-bottom:20px}
    .word-image{width:120px;height:120px;object-fit:cover;border:4px solid var(--gold);border-radius:10px;margin-bottom:15px}
    .audio-btn{position:absolute;top:10px;left:10px;width:40px;height:40px;background:var(--gold);border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#1c2d4f}
    .speaker-icon{width:20px;height:20px;fill:#1c2d4f}
    .scrambled-letters,.answer-boxes{display:flex;justify-content:center;gap:8px;flex-wrap:wrap;touch-action:manipulation}
    .scrambled-letters{margin:20px 0}
    .letter-box{width:45px;height:45px;background:#fff;border:3px solid #1c2d4f;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:bold;color:#1c2d4f;cursor:grab;user-select:none;transition:.3s all}
    .answer-area{margin-top:20px}
    .answer-box{width:45px;height:45px;border:3px solid var(--gold);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:bold;color:#1c2d4f;background:#fefefe;min-height:45px;transition:.2s all}
    .answer-box.filled{background:#e8f5e8;border-color:#4CAF50}
    .check-btn{background:#1c2d4f;color:#fff;border:none;padding:12px 25px;border-radius:25px;font-family:'Schoulschreft',Arial,sans-serif;font-size:16px;cursor:pointer;margin-top:15px}
    .reset-btn{background:#f2ac3b;color:#1c2d4f;border:none;padding:8px 15px;border-radius:20px;font-family:'Schoulschreft',Arial,sans-serif;font-size:14px;cursor:pointer;margin-left:10px}
    .navigation{display:flex;justify-content:space-between;align-items:center;margin-top:30px}
    .nav-btn{background:#1c2d4f;color:#fff;border:none;padding:12px 20px;border-radius:25px;font-family:'Schoulschreft',Arial,sans-serif;font-size:16px;cursor:pointer;min-width:120px}
    .completion-message{background:linear-gradient(135deg,#4CAF50,#45a049);color:#fff;padding:30px;border-radius:15px;margin-top:30px;font-size:24px;font-weight:bold;text-align:center;box-shadow:0 4px 8px rgba(0,0,0,.2)}
    @media (max-width:768px){
      .word-container{margin:0 10px;padding:25px}
      .header{font-size:22px;padding:15px}
      .letter-box,.answer-box{width:40px;height:40px;font-size:18px}
      .navigation{flex-direction:column;gap:15px}
      .nav-btn{width:100%}
    }
  </style>
</head>
<body>
  <div class="header">Setz d'Buschtawen an d√©i richteg Reiefolleg</div>

  <div class="container">
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <div class="word-counter" id="wordCounter">Wuert 1 vun 6</div>
    <div class="word-container" id="currentWord"></div>

    <div class="navigation">
      <button class="nav-btn" id="prevBtn" onclick="previousWord()" disabled>‚Üê Zr√©ck</button>
      <button class="nav-btn" id="nextBtn" onclick="nextWord()" disabled>Weider ‚Üí</button>
    </div>

    <div class="completion-message" id="completionMessage" style="display:none;">
      üéâ Gratulatioun! Dir hutt all d'Wierder richteg geschriwwen! üéâ
    </div>
  </div>

  <audio id="audio" preload="auto"></audio>

  <script>
    function shuffleArray(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a; }

    let words = shuffleArray([
      { correct:"KROUN", scrambled:["N","R","O","U","K"], image:"https://i.postimg.cc/2qbG0wH6/temp-Image-JCn-WDB.avif", pronunciation:"d'Kroun", audio:"https://github.com/albrechtclaire1007/trounwiessel/raw/refs/heads/main/M__kroun.mp3" },
      { correct:"TROUN", scrambled:["R","N","T","U","O"], image:"https://i.postimg.cc/HrP30Ktx/temp-Image-FUGbdk.avif", pronunciation:"den Troun", audio:"https://github.com/albrechtclaire1007/trounwiessel/raw/refs/heads/main/M__troun.mp3" },
      { correct:"GROUSSHERZOG", scrambled:["G","O","R","U","Z","H","R","O","S","S","E","G"], image:"https://i.postimg.cc/CZB7cNv5/temp-Image-JNo-Xc-R.avif", pronunciation:"de Groussherzog", audio:"https://github.com/albrechtclaire1007/trounwiessel/raw/refs/heads/main/M__groussherzog.mp3" },
      { correct:"ROUDEL√âIW", scrambled:["U","E","R","D","O","W","L","I","√â"], image:"https://i.postimg.cc/5HYgs3PQ/temp-Image-Dd-Tg-S4.avif", pronunciation:"de roude L√©iw", audio:"https://github.com/albrechtclaire1007/trounwiessel/raw/refs/heads/main/M__roude%20l%C3%A9iw.mp3" },
      { correct:"PALAIS", scrambled:["L","I","P","A","S","A"], image:"https://i.postimg.cc/sBQmTcnh/temp-Imageh35-I3-I.avif", pronunciation:"d'Palais", audio:"https://github.com/albrechtclaire1007/trounwiessel/raw/refs/heads/main/M__palais.mp3" },
      { correct:"SCHLASS", scrambled:["H","S","C","A","L","S","S"], image:"https://i.postimg.cc/7CG9KVBL/temp-Image-GM1j-Lo.avif", pronunciation:"d'Schlass", audio:"https://github.com/albrechtclaire1007/trounwiessel/raw/refs/heads/main/M__schlass.mp3" }
    ]);

    let currentWordIndex=0, completedWords=new Set();
    const audioEl=document.getElementById('audio');

    function createWordBlock(word){
      return `
        <div class="image-container">
          <button class="audio-btn" onclick="playAudio()" title="Lauschteren" aria-label="Lauschteren">
            <svg class="speaker-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
            </svg>
          </button>
          <img src="${word.image}" alt="${word.pronunciation}" class="word-image"
               onerror="this.style.display='none';this.alt='Image failed to load'">
        </div>
        <div class="scrambled-letters" id="scrambled-current">
          ${word.scrambled.map((L,i)=>`<div class="letter-box" draggable="true" data-letter="${L}" data-index="${i}" role="button" aria-label="Buschtaw ${L}">${L}</div>`).join('')}
        </div>
        <div class="answer-area">
          <div class="answer-boxes" id="answer-current">
            ${Array(word.correct.length).fill('').map((_,i)=>`<div class="answer-box" data-position="${i}" role="button" aria-label="Plaz ${i+1}"></div>`).join('')}
          </div>
          <button class="check-btn" onclick="checkCurrentAnswer()">Kontroll√©ieren</button>
          <button class="reset-btn" onclick="resetCurrentWord()">Zr√©cksetzen</button>
          <div class="result" id="result-current"></div>
        </div>`;
    }

    function initializeGame(){ showCurrentWord(); updateProgress(); updateNavigation(); }

    function showCurrentWord(){
      document.getElementById('currentWord').innerHTML = createWordBlock(words[currentWordIndex]);
      document.getElementById('wordCounter').textContent=`Wuert ${currentWordIndex+1} vun ${words.length}`;
      addDnD(); addTap();
      const src=words[currentWordIndex].audio; if(audioEl.src!==src) audioEl.src=src; audioEl.play().catch(()=>{});
    }

    // Tap-to-place (mobile)
    function addTap(){
      document.querySelectorAll('.letter-box').forEach(el=>{
        el.addEventListener('click', ()=>{
          const nextEmpty=[...document.querySelectorAll('#answer-current .answer-box')].find(b=>!b.textContent);
          if(!nextEmpty) return;
          nextEmpty.textContent=el.dataset.letter; nextEmpty.classList.add('filled'); el.remove();
        }, {passive:true});
      });
      document.querySelectorAll('#answer-current .answer-box').forEach(box=>{
        box.addEventListener('click', ()=>{
          if(!box.textContent) return;
          const L=box.textContent; const sc=document.getElementById('scrambled-current');
          const t=document.createElement('div'); t.className='letter-box'; t.draggable=true; t.dataset.letter=L; t.textContent=L;
          t.addEventListener('click', ()=>{ const n=[...document.querySelectorAll('#answer-current .answer-box')].find(b=>!b.textContent); if(!n) return; n.textContent=t.dataset.letter; n.classList.add('filled'); t.remove(); }, {passive:true});
          t.addEventListener('dragstart', handleDragStart); t.addEventListener('dragend', handleDragEnd);
          sc.appendChild(t); box.textContent=''; box.classList.remove('filled');
        }, {passive:true});
      });
    }

    // Drag & drop (desktop)
    let dragged=null, from=null;
    function addDnD(){
      document.querySelectorAll('.letter-box').forEach(b=>{ b.addEventListener('dragstart', handleDragStart); b.addEventListener('dragend', handleDragEnd); });
      document.querySelectorAll('.answer-box').forEach(box=>{
        box.addEventListener('dragover', e=>e.preventDefault());
        box.addEventListener('drop', handleDrop);
      });
      const sc=document.getElementById('scrambled-current');
      sc.addEventListener('dragover', e=>e.preventDefault());
      sc.addEventListener('drop', handleDropBack);
    }
    function handleDragStart(e){ dragged=e.target; from=e.target.parentElement; e.target.classList.add('dragging'); }
    function handleDragEnd(e){ e.target.classList.remove('dragging'); dragged=null; from=null; }
    function handleDrop(e){ e.preventDefault(); const box=e.target.closest('.answer-box'); if(!box || box.textContent || !dragged) return; box.textContent=dragged.dataset.letter; box.classList.add('filled'); dragged.remove(); }
    function handleDropBack(e){
      e.preventDefault();
      if(!dragged) return;
      const sc=document.getElementById('scrambled-current'); const L=dragged.dataset.letter;
      const t=document.createElement('div'); t.className='letter-box'; t.draggable=true; t.dataset.letter=L; t.textContent=L;
      t.addEventListener('dragstart', handleDragStart); t.addEventListener('dragend', handleDragEnd);
      t.addEventListener('click', ()=>{ const n=[...document.querySelectorAll('#answer-current .answer-box')].find(b=>!b.textContent); if(!n) return; n.textContent=t.dataset.letter; n.classList.add('filled'); t.remove(); }, {passive:true});
      sc.appendChild(t);
      if(from && from.id==='answer-current'){ const box=dragged.closest('.answer-box'); if(box){ box.textContent=''; box.classList.remove('filled'); } }
      dragged.remove();
    }

    function checkCurrentAnswer(){
      const ans=[...document.querySelectorAll('#answer-current .answer-box')].map(b=>b.textContent).join('');
      const correct=words[currentWordIndex].correct;
      const res=document.getElementById('result-current');
      if(ans===correct){
        res.textContent='‚úì Richteg!'; res.className='result correct';
        document.querySelectorAll('#answer-current .answer-box').forEach(b=>{ b.style.borderColor='#4CAF50'; b.style.background='#e8f5e8'; });
        completedWords.add(currentWordIndex); updateProgress(); updateNavigation();
        if(completedWords.size===words.length){ setTimeout(()=>{ document.getElementById('completionMessage').style.display='block'; }, 600); }
      } else if(ans.length===correct.length){
        res.textContent='‚úó Prob√©ier nach emol!'; res.className='result incorrect';
      } else {
        res.textContent="Setz all d'Buschtawen!"; res.className='result';
      }
    }

    function resetCurrentWord(){
      const sc=document.getElementById('scrambled-current');
      sc.innerHTML = words[currentWordIndex].scrambled.map(L=>`<div class="letter-box" draggable="true" data-letter="${L}">${L}</div>`).join('');
      document.querySelectorAll('#answer-current .answer-box').forEach(b=>{ b.textContent=''; b.classList.remove('filled'); b.style.borderColor='#f2ac3b'; b.style.background='#fefefe'; });
      document.getElementById('result-current').textContent=''; document.getElementById('result-current').className='result';
      addDnD(); addTap();
    }

    function nextWord(){ if(currentWordIndex<words.length-1 && completedWords.has(currentWordIndex)){ currentWordIndex++; showCurrentWord(); updateProgress(); updateNavigation(); } }
    function previousWord(){ if(currentWordIndex>0){ currentWordIndex--; showCurrentWord(); updateProgress(); updateNavigation(); } }
    function updateProgress(){ document.getElementById('progressFill').style.width = (completedWords.size/words.length)*100 + '%'; document.getElementById('wordCounter').textContent=`Wuert ${currentWordIndex+1} vun ${words.length}`; }
    function updateNavigation(){ document.getElementById('prevBtn').disabled=currentWordIndex===0; document.getElementById('nextBtn').disabled=!completedWords.has(currentWordIndex)||currentWordIndex===words.length-1; }
    function playAudio(){ audioEl.currentTime=0; audioEl.play().catch(()=>{}); }

    document.addEventListener('DOMContentLoaded', ()=>{ showCurrentWord(); updateProgress(); updateNavigation(); });
  </script>
</body>
</html>

